#!/bin/bash

# ðŸ”ª Hentikan semua screen
killall screen

# ðŸ”„ Update sistem dan install dependensi
apt update -y
apt install -y libcurl libjansson automake build-essential screen git

# ðŸ§¹ Bersihkan sisa instalasi sebelumnya
rm -rf hp
rm -f termux_boot_startup.sh

# ðŸ“¥ Clone dan build miner
git clone https://github.com/amirul5656/hp.git
cd hp
chmod +x build-armv8.sh autogen.sh configure
./build-armv8.sh
cd ~

# ðŸ’¥ Jalankan 4 screen miner dengan 2 thread per screen
for i in {1..4}; do
  WORKER="mbc$i"
  screen -dmS "$WORKER" ~/hp/cpuminer -a power2b -o stratum+tcps://stratum-asia.rplant.xyz:17022 -u mbc1qt9gj6nqz4p3f7tylp9mnuvc8vcyrcgue9psxg5.$WORKER -p x -t 2
  echo "ðŸ§µ Worker $WORKER aktif dengan 2 thread (screen name: $WORKER)"
done

# âœ… Info
echo "------------------------------"
echo "âœ… 4 miner aktif dari folder ~/hp"
echo "ðŸ“Ÿ Cek semua screen: screen -ls"
echo "ðŸ”Ž Lihat salah satu: screen -r mbc1  (atau mbc2, dst)"
echo "------------------------------"
